angular.module("app",["ngCookies"]).directive("escKey",function(){return function(t,e,o){e.bind("keydown keypress",function(e){27===e.which&&(t.$apply(function(){t.$eval(o.escKey)}),e.preventDefault())})}}),angular.module("app").controller("AccountController",["$scope","$rootScope","$http","$cookies",function(t,e,o,s){function n(){console.log("emitting event"),e.$broadcast("showFollowing",[e.user_artists])}e.user_artists=[],t.$watch("notifications",function(){o.post("/user/notifications",{enabled:t.notifications?"true":"false"}).then(function(t){console.log(t)},function(t){console.log(t)})}),t.following=function(){0==e.user_artists.length?o.get("/user/artists").then(function(t){console.log(t),e.user_artists=t.data.data,n()},function(t){console.log(t)}):n()},t["delete"]=function(){o.post("/user/delete",{}).then(function(t){console.log(t),window.location.href="/logout"},function(t){console.log(t)})}}]),angular.module("app").controller("ArtistController",["$scope","$http",function(t,e){function o(t){console.log(t);for(var e=0;e<t.length;e++){for(var o=null,s=640,n=0;n<t[e].images.length;n++)(!o||Math.abs(Math.min(o.width,o.height)-s)>Math.abs(Math.min(t[e].images[n].width,t[e].images[n].height)-s))&&(o=t[e].images[n],t[e].displayImageURL=t[e].images[n].url);console.log(t[e].displayImageURL)}return t}function s(){e.get("https://api.spotify.com/v1/artists/"+artist.id+"/albums",{params:{limit:t.limit,offset:t.offset}}).then(function(e){console.log(e),t.response=e;var s=t.items.concat(e.data.items);t.items=o(s),t.loaded=!0,t.loading=!1},function(e){t.loaded=!0,t.loading=!1,t.errMessage=e?e.statusText:"An error occurred"})}t.offset=0,t.limit=12,t.loaded=!1,t.loading=!1,t.searched=!1,t.items=[],t.user_artists=[],t.artist=artist,e.get("/user/artists").then(function(e){t.user_artists=e.data.data},function(t){console.log(t)}),t.search=function(e){t.offset=0,t.items=[],t.errMessage=null,t.hasErr=!1,t.loading=!0,s()},t.hasMore=function(){return t.response?t.response.data.total>t.offset+t.limit:!1},t.more=function(){t.offset+=t.limit,s()},t.img=function(t){for(var e,o=0;o<t.images.length;o++)(!e||Math.abs(Math.min(e.width,e.height)-300)>Math.abs(Math.min(t.images[o].width,t.images[o].height)-300))&&(e=t.images[o]);return e},t.click=function(o){if(console.log("i clicked:"),console.log(o),console.log("is added: "+t.isAdded(o.id)),t.isAdded(o.id)){console.log("we gotta remove him"),console.log("the id "+o.id);for(var s=0;s<t.user_artists.length;s++)if(console.log("the object: "),console.log(t.user_artists[s]),t.user_artists[s]&&o.id==t.user_artists[s].id){console.log("found him."),t.user_artists.splice(s,1),console.log("deleted. now break!!");break}e({url:"/user/artists",method:"DELETE",data:{artist:o.id},headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(t){console.log(t.data)},function(t){console.log(t)})}else t.user_artists.push(o),t.user_artists=t.user_artists.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),console.log("post: "),e.post("/user/artists",{artist:o.id}).then(function(t){console.log(t)},function(t){console.log(t)})},t.isAdded=function(e){for(var o=0;o<t.user_artists.length;o++)if(t.user_artists[o]&&t.user_artists[o].id==e)return!0;return!1},t.btntext=function(e){return t.isAdded(e)?"Following":"Follow"},t.active=function(e){return t.isAdded(e)?"active":""},s()}]),angular.module("app").controller("ArtistsController",["$scope","$http",function(t,e){function o(){e.get("https://api.spotify.com/v1/search",{params:{q:t.query,type:"artist",limit:t.limit,offset:t.offset}}).then(function(e){console.log(e),t.response=e;var o=t.items.concat(e.data.artists.items);t.items=o,t.loaded=!0,t.loading=!1},function(e){t.loaded=!0,t.loading=!1,t.errMessage=e?e.statusText:"An error occurred"})}t.offset=0,t.limit=12,t.loaded=!1,t.loading=!1,t.searched=!1,t.items=[],t.user_artists=[],e.get("/user/artists").then(function(e){t.user_artists=e.data.data},function(t){console.log(t)}),t.search=function(e){t.offset=0,t.items=[],t.errMessage=null,t.hasErr=!1,t.loading=!0,o()},t.hasMore=function(){return t.response?t.response.data.artists.total>t.offset+t.limit:!1},t.more=function(){t.offset+=t.limit,o()},t.img=function(t){for(var e,o=0;o<t.images.length;o++)(!e||Math.abs(Math.min(e.width,e.height)-300)>Math.abs(Math.min(t.images[o].width,t.images[o].height)-300))&&(e=t.images[o]);return e},t.click=function(o){if(console.log("i clicked:"),console.log(o),console.log("is added: "+t.isAdded(o.id)),t.isAdded(o.id)){console.log("we gotta remove him"),console.log("the id "+o.id);for(var s=0;s<t.user_artists.length;s++)if(console.log("the object: "),console.log(t.user_artists[s]),t.user_artists[s]&&o.id==t.user_artists[s].id){console.log("found him."),t.user_artists.splice(s,1),console.log("deleted. now break!!");break}e({url:"/user/artists",method:"DELETE",data:{artist:o.id},headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(t){console.log(t.data)},function(t){console.log(t)})}else t.user_artists.push(o),t.user_artists=t.user_artists.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),console.log("post: "),e.post("/user/artists",{artist:o.id}).then(function(t){console.log(t)},function(t){console.log(t)})},t.isAdded=function(e){for(var o=0;o<t.user_artists.length;o++)if(t.user_artists[o]&&t.user_artists[o].id==e)return!0;return!1},t.btntext=function(e){return t.isAdded(e)?"Following":"Follow"},t.active=function(e){return t.isAdded(e)?"active":""}}]),angular.module("app").controller("NavbarController",["$scope","$location",function(t,e){t.active=function(t){return 1==t.length?"/"==window.location.pathname:0===window.location.pathname.indexOf(t)},t.nav=function(){window.location.href=t.navselect}}]),angular.module("app").controller("OverlayController",["$scope","$rootScope","$window","$http","$cookies",function(t,e,o,s,n){t.$on("showFollowing",function(o,s){console.log("got event"),t.overlayed=!0,e.user_artists=s[0]}),t.close=function(){t.overlayed=!1},t.keypress=function(e){console.log(e.keyCode),27==e.keyCode&&t.close()},t.img=function(t){for(var e,o=0;o<t.images.length;o++)(!e||Math.abs(Math.min(e.width,e.height)-300)>Math.abs(Math.min(t.images[o].width,t.images[o].height)-300))&&(e=t.images[o]);return e},t.click=function(o){if(console.log("----i clicked:"),console.log(o),console.log("is added: "+t.isAdded(o.id)),t.isAdded(o.id)){console.log("we gotta remove him"),console.log("the id "+o.id);for(var n=0;n<e.user_artists.length;n++)console.log("the object: "),console.log(e.user_artists[n]),e.user_artists[n]&&o.id==e.user_artists[n].id&&(console.log("found him."),e.user_artists.splice(n,1),console.log("deleted. now break!!"));s({url:"/user/artists",method:"DELETE",data:{artist:o.id},headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(t){console.log(t.data)},function(t){console.log(t)})}else e.user_artists.push(o),e.user_artists=e.user_artists.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),console.log("post: "),s.post("/user/artists",{artist:o.id}).then(function(t){console.log(t)},function(t){console.log(t)})},t.isAdded=function(t){for(var o=0;o<e.user_artists.length;o++)if(e.user_artists[o]&&e.user_artists[o].id==t)return!0;return!1},t.btntext=function(e){return t.isAdded(e)?"Following":"Follow"},t.active=function(e){return t.isAdded(e)?"active":""}}]),angular.module("app").controller("ReleaseController",["$scope",function(t){}]);
//# sourceMappingURL=app.min.js.map