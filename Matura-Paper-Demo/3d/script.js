!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[i]={exports:{}};t[i][0].call(d.exports,function(e){var n=t[i][1][e];return o(n?n:e)},d,d.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){var r=e("./range");t.exports.overflowX=function(e,t,n){var o=[];return o[0]=r.min(e,t.accessor),o[1]=r.max(e,t.accessor),o[1]=r.applyOverflow(o[0],o[1],n,t.data_type),o},t.exports.overflowY=function(e,t,n,o){var a=[];return a[0]=r.minMultipleSets(e,t,n),a[1]=r.maxMultipleSets(e,t,n),a[1]=r.applyOverflow(a[0],a[1],o,t[0].data_type),a}},{"./range":5}],2:[function(e,t,n){t.exports.row=function(e,t){for(var n=[],r=0;r<e.length;r++)"undefined"!=typeof e[r][t]&&n.push(e[r]);return n}},{}],3:[function(e,t,n){var r=(e("./sort"),e("./id"));t.exports.data_types=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<t.length;r++)"Number"===t[r].data_type?e[n][t[r].row]=parseFloat(e[n][t[r].row]):"Date"===t[r].data_type&&(e[n][t[r].row]=d3.time.format(t[r].date_format).parse(e[n][t[r].row]));return e},t.exports.ids=function(e,t){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)"index"!==t[o].type&&(e[n][r.get(t[o])]=e[n][t[o].row],delete e[n][t[o].row]);return e}},{"./id":4,"./sort":6}],4:[function(e,t,n){t.exports.get=function(e){return e.row+"#"+e.url},t.exports.invert=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n].rowId)return t[n]},t.exports.raw=function(e,t){return e+"#"+t}},{}],5:[function(e,t,n){t.exports.min=function(e,t){return d3.min(e,t)},t.exports.max=function(e,t){return d3.max(e,t)},t.exports.minMultipleSets=function(e,t,n){for(var r,o=0;o<t.length;o++)if(t[o].activated){var a=d3.min(e,n.raw(t[o]));"undefined"!=typeof a&&("undefined"==typeof r||r>a)&&(r=a)}return r},t.exports.maxMultipleSets=function(e,t,n){for(var r,o=0;o<t.length;o++)if(t[o].activated){var a=d3.max(e,n.raw(t[o]));("undefined"==typeof r||a>r)&&(r=a)}return r},t.exports.applyOverflow=function(e,t,n,r){return"Date"===r?new Date(e.getTime()+(t.getTime()-e.getTime())*n):"Number"===r?e+(t-e)*n:void 0}},{}],6:[function(e,t,n){t.exports=function(e,t){return e.sort(function(e,n){return t.accessor(e)<t.accessor(n)?-1:t.accessor(e)>t.accessor(n)?1:0}),e}},{}],7:[function(e,t,n){function r(){function e(e){return function(r,a){if(r)return alert(r),void console.log(r);a=h.data_types(a,i[e].config),a=h.ids(a,i[e].config);for(var s=0;s<a.length;s++)n.push(a[s]);++t===i.length&&(n=g(n,u),o(n))}}for(var t=0,n=[],r=0;r<i.length;r++)d3.csv(i[r].url,e(r))}function o(e){function t(){requestAnimationFrame(t),l.update(),TWEEN.update()}function n(){g=new THREE.Scene;var e=.8*window.innerWidth,n=.8*window.innerHeight;d=new THREE.CombinedCamera(e/2,n/2,70,1,1e3,-500,1e3),d.setZoom(1),d.toPerspective(),d.position.x=80,d.position.y=70,d.position.z=150,h=new THREE.MeshBasicMaterial({color:0,wireframe:!1}),y=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),y.setSize(e,n),l=new THREE.OrbitControls(d,y.domElement),l.damping=.2,l.addEventListener("change",r),a(),document.getElementById("visualization-wrap").appendChild(y.domElement),t(),p.range([0,100]),m.range([0,100]),i()}function r(){y.render(g,d),console.log("cords: ",d.position.x,d.position.y,d.position.z),console.log("in scene: ",d.position.x+50,d.position.y+50,d.position.z+50)}function o(e,t,n){return[e-50,t-50,n-50]}function a(){var e=new THREE.Vector3(-50,-50,-50),t=100;g.add(new THREE.ArrowHelper(new THREE.Vector3(1,0,0),e,t,16711680)),g.add(new THREE.ArrowHelper(new THREE.Vector3(0,1,0),e,t,65280)),g.add(new THREE.ArrowHelper(new THREE.Vector3(0,0,1),e,t,255));for(var n=new THREE.LineDashedMaterial({color:14606046,dashSize:3,gapSize:2,scale:1}),r=[o(100,100,0),o(100,0,0)],a=[o(100,100,0),o(0,100,0)],i=[o(0,100,100),o(0,100,0)],u=[o(0,100,100),o(0,0,100)],s=[o(100,0,100),o(100,0,0)],c=[o(100,0,100),o(0,0,100)],d=[o(100,100,100),o(100,100,0)],l=[o(100,100,100),o(100,0,100)],f=[o(100,100,100),o(0,100,100)],p=0;9>p;p++){var m=[r,a,s,c,i,u,d,l,f][p],w=new THREE.Geometry;w.vertices.push(new THREE.Vector3(m[0][0],m[0][1],m[0][2])),w.vertices.push(new THREE.Vector3(m[1][0],m[1][1],m[1][2])),w.computeLineDistances();var v=new THREE.Line(w,n);g.add(v)}}function i(){for(var t=T.row(e,s[0].rowId),n=T.row(e,s[1].rowId),r=0;r<t.length;r++){var a=p(u.accessor(t[r])),i=m(t[r][s[0].rowId]),c=w(n[r][s[1].rowId]),d=new THREE.SphereGeometry(.5,8,6),l=new THREE.Mesh(d,h),f=o(a,i,c);l.translateX(f[0]),l.translateY(f[1]),l.translateZ(f[2]),g.add(l)}}function c(e){d.inPerspectiveMode?d.setZoom(1):d.setZoom(5);var t;"xy"===e?t=o(50,50,200):"xz"===e?t=o(50,-100,50):"zy"===e&&(t=o(-100,50,50));var n={x:d.position.x},r={x:d.position.y},a={x:d.position.z},i={x:t[0]},u={x:t[1]},s={x:t[2]},c=new TWEEN.Tween(n).to(i,1400),l=new TWEEN.Tween(r).to(u,1400),f=new TWEEN.Tween(a).to(s,1400);c.easing(TWEEN.Easing.Cubic.InOut),l.easing(TWEEN.Easing.Cubic.InOut),f.easing(TWEEN.Easing.Cubic.InOut),c.onUpdate(function(){d.position.x=n.x}),l.onUpdate(function(){d.position.y=r.x}),f.onUpdate(function(){d.position.z=a.x}),c.start(),l.start(),f.start()}$("#xtext").html(u.name?u.name:u.row),$("#ytext").html((s[0].name?s[0].name:s[0].row)+" in "+s[0].unit),$("#ztext").html((s[1].name?s[1].name:s[1].row)+" in "+s[1].unit),v=H.overflowX(e,u,1.1),E=[],x=[],E[0]=R.min(e,f.raw(s[0])),E[1]=R.max(e,f.raw(s[0])),E[1]=R.applyOverflow(E[0],E[1],1.1,s[0].data_type),x[0]=R.min(e,f.raw(s[1])),x[1]=R.max(e,f.raw(s[1])),x[1]=R.applyOverflow(x[0],x[1],1.1,s[1].data_type),p.domain(v),m.domain(E),w.domain(x);var d,l,g,y,h;n(),r(),$("#toPerspective").click(function(){d.toPerspective(),d.setZoom(1),d.updateProjectionMatrix(),r()}),$("#toOrtho").click(function(){d.toOrthographic(),d.setZoom(5),d.updateProjectionMatrix(),r()}),$("#xy").click(function(){c("xy")}),$("#xz").click(function(){c("xz")}),$("#zy").click(function(){c("zy")})}var a,i,u,s,c,d,l,f,p,m,w,v,E,x,g=e("./modules/sort"),y=e("./modules/id"),h=e("./modules/format"),T=e("./modules/filter"),H=e("./modules/domain"),R=e("./modules/range");d3.json("meta.json",function(e,t){if(e)return console.log(e),void alert(e);a=[],i=t.datasets,u={},s=[];for(var n=d3.scale.category20(),o=0;o<i.length;o++)for(var v=i[o],E=v.url,x=0;x<v.config.length;x++){var g=v.config[x];g.url=E,g.rowId=y.get(g),a.push(g),"index"===g.type?u=g:"value"===g.type&&(g.color=n(s.length+1),"undefined"==typeof g.activated&&(g.activated=!0),s.push(g))}"Number"===u.data_type?p=d3.scale.linear():"Date"===u.data_type&&(p=d3.time.scale()),"Number"===s[0].data_type?m=d3.scale.linear():"Date"===s[0].data_type&&(m=d3.time.scale()),"Number"===s[1].data_type?w=d3.scale.linear():"Date"===s[1].data_type&&(w=d3.time.scale()),p.range([0,100]),m.range([0,100]),w.range([0,100]),u.accessor=function(e){return e[u.row]},u.accessor_scaled=function(e){return p(e[u.row])},c=function(e){return function(t){return t[e.rowId]}},l=function(e){return function(t){return m(t[e.rowId])}},d=function(e,t){return function(n){return[e.accessor_scaled(n),l(t)(n)]}},f={raw:c,scaled:l,cord:d},r()})},{"./modules/domain":1,"./modules/filter":2,"./modules/format":3,"./modules/id":4,"./modules/range":5,"./modules/sort":6}]},{},[7]);
//# sourceMappingURL=script.js.map
